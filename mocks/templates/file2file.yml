logger:
  type: console
  opts:
    level: info
    name: test/file2file

datasources:
  - id: datasource.file.json
    type: file
    opts:
      connection:
        uri: !REALPATH mocks/files/records.json
  - id: datasource.mongodb
    type: mongodb
    opts:
      connection:
        uri: !ENV [XTRANSPORTER_MONGODB_URI, "mongodb://127.0.0.1:27017"]
        database: !ENV [XTRANSPORTER_MONGODB_DATABSE, "test"]
        collection: !ENV [XTRANSPORTER_MONGODB_COLLECTION, "records"]
        clientOpts:
          useUnifiedTopology: true
      fields:
        id: "id"
        createdAt: "createdAt"
        updatedAt: "updatedAt"

storages:
  - id: storage.file.json
    type: file
    opts:
      connection:
        uri: !REALPATH temp/files/records.json
      fields:
        id: "id"
        createdAt: "createdAt"
        updatedAt: "updatedAt"

pipelines:
  - id: parser.builtin
    type: parser
    opts:
      schema: !LOADER [mocks/schemas/parser.json]
  - id: filter.builtin
    type: filter
    opts:
      schema: !LOADER [mocks/schemas/filter.json]
  - id: passthrough
    type: passthrough
